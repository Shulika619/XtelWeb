<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments :: head}"></head>
<body>

<div th:replace="fragments :: navbar"></div>
<div th:replace="fragments :: h1"></div>

<div class="dropdown-divider"></div>

<div class="col-md-10 container-fluid align-content-center">
    <div class="row ">
        <div class="col-xl-3 col-lg-6">
            <div class="card l-bg-orange-dark">
                <div class="card-statistic-3 p-4">
                    <div class="card-icon card-icon-large"><i class="fas fa-clock"></i></div>
                    <div class="mb-4">
                        <h5 class="card-title mb-0">Сегодня</h5>
                    </div>
                    <div class="row align-items-center mb-2 d-flex">
                        <div class="col-8">
                            <h2 class="d-flex align-items-center mb-0"
                                th:text="${#dates.format(dateToday, 'dd MMM yyyy')}"></h2>
                        </div>
                    </div>
                    <div class="progress mt-1 " data-height="8" style="height: 8px;">
                        <div class="progress-bar l-bg-cyan" role="progressbar" data-width="25%" aria-valuenow="25"
                             aria-valuemin="0" aria-valuemax="100" style="width: 25%;"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-lg-6">
            <div class="card l-bg-cherry">
                <div class="card-statistic-3 p-4">
                    <div class="card-icon card-icon-large"><i class="fas fa-envelope-square"></i></div>
                    <div class="mb-4">
                        <h5 class="card-title mb-0">Сообщений сегодня</h5>
                    </div>
                    <div class="row align-items-center mb-2 d-flex">
                        <div class="col-8">
                            <h2 class="d-flex align-items-center mb-0" th:text="${countPostsToday}">
                            </h2>
                        </div>
                        <div class="col-4 text-right" th:if="${countPostsToday>0}">
                            <span><i class="fa fa-arrow-up"></i></span>
                        </div>
                    </div>
                    <div class="progress mt-1 " data-height="8" style="height: 8px;">
                        <div class="progress-bar l-bg-cyan" role="progressbar" data-width="25%" aria-valuenow="25"
                             aria-valuemin="0" aria-valuemax="100" style="width: 25%;"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-lg-6">
            <div class="card l-bg-blue-dark">
                <div class="card-statistic-3 p-4">
                    <div class="card-icon card-icon-large"><i class="fas fa-users"></i></div>
                    <div class="mb-4">
                        <h5 class="card-title mb-0">Сотрудников</h5>
                    </div>
                    <div class="row align-items-center mb-2 d-flex">
                        <div class="col-8">
                            <h2 class="d-flex align-items-center mb-0" th:text="${countEmployee}"></h2>
                        </div>
                    </div>
                    <div class="progress mt-1 " data-height="8" style="height: 8px;">
                        <div class="progress-bar l-bg-green" role="progressbar" data-width="25%" aria-valuenow="25"
                             aria-valuemin="0" aria-valuemax="100" style="width: 25%;"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-lg-6">
            <div class="card l-bg-green-dark">
                <div class="card-statistic-3 p-4">
                    <div class="card-icon card-icon-large"><i class="fas fa-university"></i></div>
                    <div class="mb-4">
                        <h5 class="card-title mb-0">Отделов</h5>
                    </div>
                    <div class="row align-items-center mb-2 d-flex">
                        <div class="col-8">
                            <h2 class="d-flex align-items-center mb-0" th:text="${countDepartments}"></h2>
                        </div>
                        <!--                        <div class="col-4 text-right">-->
                        <!--                            <span>10% <i class="fa fa-arrow-up"></i></span>-->
                        <!--                        </div>-->
                    </div>
                    <div class="progress mt-1 " data-height="8" style="height: 8px;">
                        <div class="progress-bar l-bg-orange" role="progressbar" data-width="25%" aria-valuenow="25"
                             aria-valuemin="0" aria-valuemax="100" style="width: 25%;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div th:fragment="h1" class="container-fluid text-center">
    <h1 class="mt-3 mb-3">Последние сообщения</h1>
</div>

<div class="dropdown-divider"></div>

<div class="container bootstrap snippets bootdeys">
    <div class="row">
        <th:block th:each="post: ${lastPosts}">
            <div class="col-xl-4 col-lg-6 content-card">
                <div class="card-big-shadow align-content-center">
                    <div class="card card-just-text" data-background="color" data-color="yellow" data-radius="none">
                        <div class="content">
                            <h6 th:text="'кому: '+${post.getToDepartment().getName()}" class="category"/>
                            <h4 th:text="${post.getFromEmployee().getFullName()}" class="title"><a href="#"></a></h4>
                            <p th:text="${post.getTextMsg()}" class="description description-truncate"/>
                        </div>
                    </div> <!-- end card -->
                </div>
            </div>
        </th:block>
    </div>
</div>

</body>
</html>